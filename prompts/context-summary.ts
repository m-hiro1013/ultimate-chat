/**
 * コンテキスト要約プロンプト
 * 古い会話履歴を要約して中期記憶に変換するための指示
 * 会話が20ターンを超えた場合にバックグラウンドで実行
 */
export const CONTEXT_SUMMARY_PROMPT = `
以下の会話履歴を要約してください。
この要約はAIアシスタントが以降の会話で参照するコンテキストとして使用されます。

## 要約ルール
- 重要度の高い情報を優先的に保持する
- 以下のカテゴリに分けて要約する:

### 保持すべき情報（必ず残す）
- 決定事項（技術選定、設計方針、合意内容）
- ユーザーが共有したコード、URL、ファイルの内容の要旨
- ユーザーの好み・スタイル（回答形式、言語の好み、技術スタック）
- 現在進行中のタスクやプロジェクトの状態
- エラーや問題の解決履歴

### 圧縮してよい情報
- 雑談・挨拶
- AIの冗長な説明部分
- 試行錯誤の途中経過（最終結果のみ残す）

## 出力形式
以下のJSON形式で出力してください:
{
  "projectContext": "進行中のプロジェクトや作業の概要",
  "decisions": ["決定事項1", "決定事項2"],
  "userPreferences": ["好み1", "好み2"],
  "keyInformation": ["重要情報1", "重要情報2"],
  "currentState": "現在の状態・次にやるべきこと"
}

## 会話履歴:
{conversation_history}
`.trim();
